<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мысли и Сила</title>
<link rel="apple-touch-icon" sizes="180x180" href="icon.png">
<link rel="icon" type="image/png" sizes="512x512" href="icon.png">
<meta name="theme-color" content="#ffffff">
<style>
  body {
    font-family: sans-serif;
    padding: 20px;
    transition: background 1s;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background: #f0f0f0;
    overflow: hidden;
    position: relative;
  }
  h1 { text-align: center; margin-bottom: 10px; }
  button {
    padding: 10px 20px;
    margin: 5px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    position: relative;
    z-index: 2;
  }
  #positive { background: #4CAF50; color: white; }
  #negative { background: #f44336; color: white; }
  #thoughtInput { width: 100%; padding: 10px; margin: 10px 0; font-size: 16px; border-radius: 5px; }
  #thoughts { margin-top: 20px; flex-grow: 1; overflow-y: auto; z-index: 1; }
  .thought {
    background: white;
    padding: 10px;
    margin-bottom: 5px;
    border-radius: 5px;
    transition: background 1s, transform 0.3s;
    display: flex;
    align-items: center;
  }
  .highlight { background: #ffff99; transform: scale(1.05); }
  .timestamp { font-size: 12px; color: #555; margin-left: auto; }
  .icon { font-size: 20px; margin-right: 10px; }
  #counter { margin-top: 10px; font-weight: bold; text-align: center; }
  /* Эффект энергии */
  .energy {
    position: absolute;
    top: -50px;
    left: 50%;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    opacity: 0.8;
    pointer-events: none;
    animation: flow 1.5s forwards;
    z-index: 1;
  }
  @keyframes flow {
    0% { transform: translate(-50%, 0) scale(1); opacity: 0.8; }
    100% { transform: translate(-50%, 100vh) scale(0.5); opacity: 0; }
  }
</style>
</head>
<body>

<h1>Мысли и Сила</h1>

<div style="text-align:center;">
  <button id="positive">Даёт силы</button>
  <button id="negative">Забирает силы</button>
</div>

<input type="text" id="thoughtInput" placeholder="Запиши мысль...">
<button id="saveThought">Сохранить мысль</button>

<div id="counter"></div>
<div id="thoughts"></div>

<script>
  const body = document.body;
  const thoughtsContainer = document.getElementById('thoughts');
  const counter = document.getElementById('counter');
  let currentType = null;

  // Фон по времени дня
  function setBackgroundByTime() {
    const hour = new Date().getHours();
    if(hour >= 6 && hour < 12) body.style.background = '#fff9c4';
    else if(hour >= 12 && hour < 18) body.style.background = '#b3e5fc';
    else if(hour >= 18 && hour < 21) body.style.background = '#ffcc80';
    else body.style.background = '#303f9f';
  }
  setBackgroundByTime();

  // Обновление мыслей
  function updateThoughts() {
    thoughtsContainer.innerHTML = '';
    const thoughts = JSON.parse(localStorage.getItem('thoughts') || '[]');
    thoughts.forEach(t => {
      const div = document.createElement('div');
      div.className = 'thought';
      const icon = t.type === 'positive' ? '✅' : '⚡';
      div.innerHTML = `<span class="icon">${icon}</span>${t.text}<div class="timestamp">${t.time}</div>`;
      thoughtsContainer.appendChild(div);
    });
    counter.textContent = `Мыслей всего: ${thoughts.length}`;
  }

  // Создание эффекта энергии
  function createEnergy(type) {
    const energy = document.createElement('div');
    energy.className = 'energy';
    energy.style.background = type === 'positive' ? '#4CAF50' : '#f44336';
    energy.style.left = (Math.random() * 80 + 10) + '%'; // случайная позиция
    body.appendChild(energy);
    setTimeout(() => energy.remove(), 1500);
  }

  // Кнопки энергии
  function activateEnergy(type) {
    currentType = type;
    body.style.background = type === 'positive' ? '#d0f0c0' : '#f0d0d0';
    createEnergy(type);
    const message = type === 'positive' ? 'Энергия и сила активированы!' : 'Мы наблюдаем и отпускаем эту энергию.';
    alert(message);
    setTimeout(() => setBackgroundByTime(), 5000);
  }

  document.getElementById('positive').addEventListener('click', () => activateEnergy('positive'));
  document.getElementById('negative').addEventListener('click', () => activateEnergy('negative'));

  // Сохранение мыслей
  document.getElementById('saveThought').addEventListener('click', () => {
    const input = document.getElementById('thoughtInput');
    if(input.value.trim() === '' || !currentType) return;
    const thoughts = JSON.parse(localStorage.getItem('thoughts') || '[]');
    const now = new Date();
    const newThought = { text: input.value.trim(), time: now.toLocaleString(), type: currentType };
    thoughts.unshift(newThought);
    localStorage.setItem('thoughts', JSON.stringify(thoughts));
    input.value = '';
    currentType = null;

    const newDiv = document.createElement('div');
    newDiv.className = 'thought highlight';
    const icon = newThought.type === 'positive' ? '✅' : '⚡';
    newDiv.innerHTML = `<span class="icon">${icon}</span>${newThought.text}<div class="timestamp">${newThought.time}</div>`;
    thoughtsContainer.prepend(newDiv);
    setTimeout(() => newDiv.classList.remove('highlight'), 1000);

    updateThoughts();
  });

  updateThoughts();
</script>

</body>
</html>
